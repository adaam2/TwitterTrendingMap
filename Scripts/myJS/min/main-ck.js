var map,mc;$(function(){function e(){var e=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#8899a6"},{lightness:-25},{saturation:-100}]}],t={zoom:3,backgroundColor:"#A3A3A3",disableDoubleClickZoom:!0,center:new google.maps.LatLng(51,-.2),mapTypeID:google.maps.MapTypeId.HYBRID,keyboardShortcuts:!1,overviewMapControl:!1,panControl:!1,scrollwheel:!1,streetViewControl:!1,styles:e};o=new google.maps.Map(document.getElementById("map-canvas"),t);var i={gridSize:100,batchSize:3e3,batchSizeIE:200,maxZoom:12,averageCenter:!1};mc=new MarkerClusterer(o,[],i)}function t(e){var t='<div class="tweet"><img src="'+e.ImageUrl+'"/><div class="tweet-body">'+e.Text+"</div></div>";return t}$("#minimize").click(function(){var e=$(".toggle");e.slideToggle(),$(this).text(function(e,t){return"More"===t?"Less":"More"})}),e();var i=$.connection.geoFeedHub,o;i.client.rateLimited=function(e){console.log(e)},i.client.broadcastTweetMessage=function(e){console.log(e);var i=new google.maps.Marker({map:o,position:new google.maps.LatLng(e.Latitude,e.Longitude),title:e.Text+" by @"+e.User}),n=new google.maps.InfoWindow({content:t(e)});google.maps.event.addListener(i,"click",function(){n.open(o,i)}),mc.addMarker(i)},$.connection.hub.start().done(function(){console.log("Now connected, connection ID = "+$.connection.hub.id)})});